version: "3"

services:
  phoenix:
    image: meet-api
    environment:
      PGUSER: postgres
      PGPASSWORD: postgres
      PGDATABASE: database_name
      PGPORT: 5432
      PGHOST: postgres
    ports:
      - "4000:4000"
    depends_on:
      - postgres
  postgres:
    image: postgres:9.6
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      # Set a path where Postgres should store the data
      PGDATA: /var/lib/postgresql/data/pgdata
    restart: always
    volumes:
      - pgdata:/var/lib/postgresql/data
  neo4j:
    image: neo4j:latest
    network_mode: "bridge"
    ports:
      - "7474:7474"
      - "7687:7687"
    environment:
      - NEO4J_dbms_security_procedures_unrestricted=apoc.*
      - NEO4J_apoc_import_file_enabled=true
      - NEO4J_dbms_shell_enabled=true
    volumes:
      - neo4jdata:/data
  # neo4j-test-db:
  #   image: neo4j
  #   volumes:
  #     - neo4jtest:/var/lib/neo4j/data-test
  #   ports:
  #     - "7475:7474"
  #     - "7688:7687"
  #   environment:
  #     - NEO4J_dbms_connector_bolt_advertised__address=:7688

volumes:
  neo4jdata:
  pgdata:
  # neo4jtest:
